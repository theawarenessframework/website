<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Awareness Framework</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:ital,wght@0,400;0,700;1,400&family=Inter:wght@300;400;600;700&display=swap" rel="stylesheet">
    
    <!-- FAVICON LINK: Using requested favicon.ico path -->
    <link rel="icon" href="favicon.ico" type="image/x-icon">

    <!-- Schema.org JSON-LD for Google Product/Book Snippet (using ISBN) -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "Book",
      "name": "The Awareness Framework",
      "author": [
        { "@type": "Person", "name": "Sanjeev Khanal" },
        { "@type": "Person", "name": "Raheel Budha" }
      ],
      "isbn": "9789937192835",
      "bookEdition": "1st Edition",
      "description": "The Awareness Framework explores consciousness, perception, and the fundamental structure of reality, guiding readers through balancing inner stillness with external complexity to achieve profound clarity.",
      "image": "https://placehold.co/320x500/0D1137/FFC107?text=The+Awareness+Framework",
      "url": "https://theawarenessframework.github.io/website/",
      "offers": {
        "@type": "Offer",
        "priceCurrency": "NPR",
        "price": "1500.00",
        "availability": "https://schema.org/InStock",
        "url": "https://grey.com.np/products/the-awareness-framework"
      }
    }
    </script>
    
    <style>
        /* Custom Colors & Fonts */
        :root {
            --color-primary: #0D1137; /* Deep Indigo */
            --color-secondary: #F7F8FC; /* Pale Blue-Gray */
            --color-accent: #FFC107; /* Vibrant Gold */
            --color-footer: #1C2438; /* Dark Charcoal */
            --font-heading: 'Playfair Display', serif;
            --font-body: 'Inter', sans-serif;
            --content-opacity: 0.95; 
        }

        body {
            font-family: var(--font-body);
            color: var(--color-primary);
            background-color: #FFFFFF;
        }

        h1, h2, h3, h4 {
            font-family: var(--font-heading);
            color: var(--color-primary);
        }

        /* Canvas and Transparency Utilities */
        #awarenessCanvas {
            position: fixed;
            top: 0;
            left: 0;
            width: 100vw;
            height: 100vh;
            z-index: -1; 
            pointer-events: none;
        }
        
        .section-transparent-white {
            background-color: rgba(255, 255, 255, var(--content-opacity)); 
        }

        .header-transparent {
            background-color: rgba(255, 255, 255, var(--content-opacity));
        }

        .footer-transparent-dark {
            background-color: rgba(28, 36, 56, var(--content-opacity));
        }

        .text-primary-custom {
            color: var(--color-primary);
        }

        /* Fixed CSS for Guaranteed Circular Social Buttons */
        .social-link-text {
            display: flex;
            justify-content: center;
            align-items: center;
            width: 32px;
            height: 32px;
            background-color: var(--color-primary); /* Deep Indigo Background */
            color: white; /* White Text */
            border-radius: 9999px; /* Force circular shape */
            font-size: 0.875rem; /* text-sm */
            font-weight: 600; /* font-semibold */
            transition: background-color 0.3s;
            text-decoration: none;
        }
        .social-link-text:hover {
            background-color: #FFC107; /* Hover to Gold */
            color: var(--color-primary);
        }
        
        /* Modal Styles */
        .modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.75);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
        }
        .modal-content {
            background-color: white;
            padding: 2rem;
            border-radius: 0.75rem;
            width: 90%;
            max-width: 448px; /* max-w-md */
            box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25);
        }
        
        /* Robust Image Placeholder Styling */
        .book-cover-container {
            position: relative;
            background-color: #0D1137; /* Deep Indigo */
            color: #FFC107; /* Gold text */
            display: flex;
            justify-content: center;
            align-items: center;
            text-align: center;
            font-family: var(--font-body);
            font-weight: 600;
            overflow: hidden;
        }
        .book-placeholder-text {
            font-size: 1.25rem;
            line-height: 1.75rem;
            padding: 1rem;
            display: none; /* Hidden by default, shown on image error */
        }

    </style>
</head>

<body class="min-h-screen">
    <!-- === FIXED BACKGROUND CANVAS === -->
    <canvas id="awarenessCanvas"></canvas>

    <!-- === 1. HEADER & NAVIGATION === -->
    <header class="sticky top-0 z-50 header-transparent border-b border-gray-100 shadow-lg">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center max-w-7xl">
            
            <!-- LEFT SECTION: Mobile Menu Button & H1 -->
            <div class="flex items-center gap-4">
                 <!-- Mobile Menu Button (Hamburger on Left) -->
                <button id="mobile-menu-button" 
                    class="md:hidden p-3 rounded-full bg-accent shadow-xl hover:bg-yellow-500 transition duration-300 focus:outline-none z-50">
                    <svg class="w-6 h-6 text-primary-custom" fill="none" stroke="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
                    </svg>
                </button>
                <h1 class="text-xl sm:text-2xl font-bold tracking-tight text-primary-custom">Home</h1>
            </div>

            <!-- CENTER: Desktop Nav -->
            <nav id="nav-menu" class="hidden md:flex space-x-8 text-sm font-medium">
                <a href="#hero" class="hover:text-gray-600 transition duration-150 font-bold text-gray-800">Framework</a>
                <a href="#insights" class="hover:text-gray-600 transition duration-150">Insights</a>
                <a href="#authors" class="hover:text-gray-600 transition duration-150">Authors</a>
                <a href="return_policy.html" class="hover:text-gray-600 transition duration-150">Policy</a>
            </nav>
            
            <!-- RIGHT SECTION: CTA Button (Visible on ALL Screens) -->
            <div>
                <!-- BUY NOW: Calls openModal() on click -->
                <button id="openModalDesktop"
                    class="border-2 border-[var(--color-primary)] text-[var(--color-primary)] bg-white 
                           py-1 px-3 text-xs md:py-2 md:px-6 md:text-sm 
                           font-bold rounded-lg transition duration-300 
                           transform hover:scale-[1.05] hover:bg-[var(--color-primary)] hover:text-white">
                    Buy Now
                </button>
            </div>
        </div>

        <!-- Mobile Dropdown Menu: Hidden by default -->
        <nav id="mobile-nav" class="hidden md:hidden px-6 py-2 border-t border-gray-100 header-transparent">
             <a href="#hero" class="block py-2 text-sm font-medium hover:bg-gray-50 transition duration-150">Framework</a>
             <a href="#insights" class="block py-2 text-sm font-medium hover:bg-gray-50 transition duration-150">Insights</a>
             <a href="#authors" class="block py-2 text-sm font-medium hover:bg-gray-50 transition duration-150">Authors</a>
             <a href="return_policy.html" class="block py-2 text-sm font-medium hover:bg-gray-50 transition duration-150">Policy</a>
        </nav>
    </header>

    
    <!-- === 2. HERO SECTION === -->
    <section id="hero" class="section-transparent-white pt-24 pb-16 md:pt-40 md:pb-24">
        <div class="container mx-auto px-6 flex flex-col md:flex-row items-center justify-center md:gap-x-16 gap-y-12 max-w-7xl">
            
            <!-- LEFT: TEXT CONTENT -->
            <div class="md:w-1/2 text-center md:text-left">
                <h2 class="text-4xl sm:text-5xl md:text-6xl font-bold tracking-tight text-primary-custom mb-4 font-heading">
                    The Awareness Framework
                </h2>
                <p class="text-xl sm:text-xl text-gray-700 mb-6 font-medium">
                    Your invitation to a new perspective on reality.
                </p>
                
                <p class="text-gray-600 mb-8 max-w-md mx-auto md:mx-0 text-justify">
                    This book is an exploration of the observer, memory, and pattern recognition: the three pillars of a structured methodology needed to bridge the gap between consciousness and the architecture of reality itself.
                </p>
                
                <!-- Hero CTA (Visible on desktop, calls openModal()) -->
                <button id="openModalHero"
                    class="bg-yellow-500 text-primary-custom py-3 px-10 text-lg font-bold rounded-lg 
                           shadow-2xl hover:bg-yellow-500 transition duration-300 transform 
                           hover:scale-[1.02] border-2 border-transparent hover:border-primary-custom">
                    Unlock the Exploration
                </button>
            </div>

            <!-- RIGHT: BOOK COVER IMAGE (With robust placeholder) -->
            <div class="md:w-1/2 flex justify-center md:justify-end mt-10 md:mt-0">
                <div id="bookCoverWrapper" 
                     class="book-cover-container w-64 md:w-80 h-[400px] md:h-[500px] shadow-2xl rounded-lg md:-translate-y-12">
                    
                    <!-- The image tag with the requested relative path -->
                    <img id="bookCoverImage" 
                         src="book.png" 
                         alt="The Awareness Framework book.png cover image" 
                         class="w-full h-full object-cover rounded-lg"
                         onerror="handleImageError(this, 'bookCoverPlaceholderText')"
                    >
                </div>
            </div>
        </div>
    </section>

    <!-- === 3. CORE BOOK INSIGHTS (The Inquiry Funnel) === -->
    <section id="insights" class="section-transparent-white py-20 md:py-32 border-t border-gray-200">
        <div class="max-w-7xl mx-auto px-6">
            <h3 class="text-center text-4xl font-bold mb-16 font-heading">Core Book Insights</h3>
            
            <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                
                <!-- Insight Card 1: The Observer as a Base -->
                <div class="p-6 bg-secondary rounded-xl shadow-lg hover:shadow-xl transition duration-300 border-t-4 border-accent">
                    <h4 class="text-2xl font-bold mb-3 text-primary-custom">1. The Observer as Base</h4>
                    <p class="text-sm text-gray-600 text-justify">
                        The fundamental concept is that the Observer is the primary foundation; defined as a non-energetic informational constant. Reality, as we perceive, is considered a byproduct of the Observer's interaction with the memory.
                    </p>
                </div>
                
                <!-- Insight Card 2: R = OMP -->
                <div class="p-6 bg-secondary rounded-xl shadow-lg hover:shadow-xl transition duration-300 border-t-4 border-accent">
                    <h4 class="text-2xl font-bold mb-3 text-primary-custom">2. R = OMP</h4>
                    <p class="text-sm text-gray-600 text-justify">
                        Introducing the core equation that defines structural reality: Reality = Observer + Memory + Pattern. This principle highlights how pattern recognition is the active step that gives rise to the perception of reality.
                    </p>
                </div>
                
                <!-- Insight Card 3: Causality and Time -->
                <div class="p-6 bg-secondary rounded-xl shadow-lg hover:shadow-xl transition duration-300 border-t-4 border-accent">
                    <h4 class="text-2xl font-bold mb-3 text-primary-custom">3. Causality: Time and Space</h4>
                    <p class="text-sm text-gray-600 text-justify">
                        Exploring the non-linear relationship between time and space. Time is explored as the measure of change in memory-stack and Space as the relation between the patterns.
                    </p>
                </div>
                
                <!-- Insight Card 4: Duality of Nature -->
                <div class="p-6 bg-secondary rounded-xl shadow-lg hover:shadow-xl transition duration-300 border-t-4 border-accent">
                    <h4 class="text-2xl font-bold mb-3 text-primary-custom">4. Duality of Nature</h4>
                    <p class="text-sm text-gray-600 text-justify">
                        Analyzing the duality of perception: where Coherence is considered as structural strenthening whereas Entropy is the tendency toward structural decay and the delicate balance between the two seeks sustainability.
                    </p>
                </div>
                
                <!-- Insight Card 5: The Principle of Alignment -->
                <div class="p-6 bg-secondary rounded-xl shadow-lg hover:shadow-xl transition duration-300 border-t-4 border-accent">
                    <h4 class="text-2xl font-bold mb-3 text-primary-custom">5. The Principle of Alignment</h4>
                    <p class="text-sm text-gray-600 text-justify">
                        Defining the state where the system achieves internal consistency and self-sufficiency through coherence between its inherent duality, leading to flow and authentic expression. And, this is achieved by aligning with bigger picture.
                    </p>
                </div>
                
                <!-- Insight Card 6: Biology & Nature of Life -->
                <div class="p-6 bg-secondary rounded-xl shadow-lg hover:shadow-xl transition duration-300 border-t-4 border-accent">
                    <h4 class="text-2xl font-bold mb-3 text-primary-custom">6. Biology and Nature of Life</h4>
                    <p class="text-sm text-gray-600 text-justify">
                        The structural emergence of life as an imperative to sustain information coherence. Life is defined not by chemical composition, but as the complex structure of memory: a system capable of recognizing and preserving patterns within chaos.
                    </p>
                </div>
            </div>
        </div>
    </section>
    
    <!-- === 4. PHILOSOPHY QUOTE === -->
    <section class="section-transparent-white py-16 md:py-24 border-t border-gray-200">
        <div class="max-w-4xl mx-auto px-6 text-center">
            <p class="text-2xl md:text-3xl font-light italic text-gray-700 leading-relaxed font-heading text-justify">
                "The universe is not a scattered orchestra of parts but a single composition in motion: each particle, pattern, and pulse contributing to a music vast enough to include its own silence."
            </p>
	    <p class="text-2xl md:text-3xl font-light italic text-gray-700 leading-relaxed font-heading text-right mt-2">
  <strong><i>- The Awareness Framework</i></strong>
             </p>
        </div>
    </section>

    <!-- === 5. MEET THE AUTHORS === -->
    <section id="authors" class="section-transparent-white py-20 md:py-32 border-t border-gray-200">
        <div class="max-w-7xl mx-auto px-6">
            <h3 class="text-center text-4xl font-bold mb-16 font-heading">Meet the Authors</h3>
            
            <div class="flex flex-col lg:flex-row justify-center gap-12">
                
                <!-- Author 1: Sanjeev Khanal -->
                <div class="lg:w-1/3 flex flex-col items-center text-center">
                    
                    <!-- Image Placeholder 1 (Sanjeev Khanal) -->
                    <div class="w-40 h-40 bg-indigo-800 rounded-full flex items-center justify-center mb-6 shadow-xl">
                        <span class="text-6xl font-bold text-white font-heading">SK</span>
                    </div>

                    <h4 class="text-2xl font-bold mb-2">Sanjeev Khanal</h4>
                    <p class="text-sm font-medium text-gray-500 mb-4">The Seeker of Vastness</p>
                    
                    <p class="text-gray-700 mb-6 text-justify">
                        A mind drawn to vastness: to take the smallest spark of thought and project it toward infinity. Sanjeev sees patterns where others see parts, expanding each question into the architecture of reality itself. His reflections wander across space, memory, and motion, weaving intuition with quiet reasoning. To him, awareness is not an idea but a living field, one that breathes through everything that exists.
                    </p>
                    
                </div>
                
                <!-- Author 2: Raheel Budha -->
                <div class="lg:w-1/3 flex flex-col items-center text-center">
                    
                    <!-- Image Placeholder 2 (Raheel Budha) -->
                    <div class="w-40 h-40 bg-indigo-800 rounded-full flex items-center justify-center mb-6 shadow-xl">
                        <span class="text-6xl font-bold text-white font-heading">RB</span>
                    </div>

                    <h4 class="text-2xl font-bold mb-2">Raheel Budha</h4>
                    <p class="text-sm font-medium text-gray-500 mb-4">The Seeker of Clarity</p>
                    
                    <p class="text-gray-700 mb-6 text-justify">
                        A mind tuned to clarity: to slow down within complexity and reveal the delicate order hidden inside. Raheel's attention moves inward, tracing the subtle lines that connect perception, thought, and meaning. He seeks coherence through stillness, bringing definition where there is depth and light where there is density. For him, awareness is precision, the art of seeing what holds the world together from within.
                    </p>

                </div>

            </div>

            <p class="max-w-3xl mx-auto mt-12 pt-6 border-t border-gray-200 text-gray-600 font-medium text-justify text-lg md:text-xl leading-relaxed">
  <i>Their collaboration reflects the same principle the book describes: that reality unfolds through delicate equilibrium, through the meeting of perspectives that refine one another until coherence is achieved.</i>
</p>
        </div>
    </section>

    <!-- === 6. FINAL INVITATION / CTA === -->
    <section class="section-transparent-white py-20 md:py-24 text-center border-t border-gray-200">
        <h3 class="text-3xl font-bold mb-6 font-heading">Ready to Begin Your Exploration?</h3>
        <p class="text-lg text-gray-700 mb-8">
            Acquire the foundational insights to understand the architecture of reality.
        </p>
        
        <!-- Final CTA: Calls openModal() on click -->
        <button id="openModalFooter"
            class="bg-[var(--color-primary)] text-white py-4 px-12 text-xl font-bold rounded-lg 
                   shadow-2xl hover:bg-indigo-900 transition duration-300 transform 
                   hover:scale-[1.05]">
            Start Your Journey Now
        </button>
    </section>


    <!-- === 7. FOOTER === -->
    <footer class="footer-transparent-dark text-gray-300 py-10">
        <div class="container mx-auto px-6 flex flex-col sm:flex-row justify-between items-center text-center sm:text-left text-sm max-w-7xl">
            <!-- ISBN Added Here -->
            <p class="mb-2 sm:mb-0">ISBN: 9789937192835 | &copy; 2025 Sanjeev Khanal and Raheel Budha.</p>
            <div class="flex space-x-4 mt-4 sm:mt-0">
                <a href="return_policy.html" class="hover:text-white transition duration-150">Return Policy</a>
                <a href="#hero" class="hover:text-white transition duration-150">Back to Top</a>
            </div>
        </div>
    </footer>

    
    <!-- === 8. WHATSAPP ORDER MODAL (Hidden by default) === -->
    <div id="orderModal" class="modal hidden">
        <div class="modal-content">
            <div class="flex justify-between items-center border-b pb-3 mb-4">
                <h4 class="text-2xl font-bold font-heading text-primary-custom">Place Your Order</h4>
                <button id="closeModal" class="text-gray-500 hover:text-gray-900 text-3xl font-light">&times;</button>
            </div>
            
            <p class="text-lg font-semibold text-gray-800 mb-4">Price: NPR 1500</p>

            <form id="orderForm" class="space-y-4">
                <div>
                    <input type="text" id="customerName" placeholder="Full Name (Required)" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-accent focus:border-accent">
                </div>
                <div>
                    <input type="tel" id="customerPhone" placeholder="Phone Number (Required for COD)" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-accent focus:border-accent">
                </div>
                <div>
                    <input type="email" id="customerEmail" placeholder="Email (Optional)" class="w-full p-3 border border-gray-300 rounded-lg focus:ring-accent focus:border-accent">
                </div>
                <div>
                    <textarea id="customerAddress" placeholder="Full Shipping Address (Required)" rows="3" required class="w-full p-3 border border-gray-300 rounded-lg focus:ring-accent focus:border-accent"></textarea>
		    <p> Payment Mode: Cash on Delivery </p>
                </div>
                
                <button type="submit"
                    class="w-full bg-green-500 text-white py-3 font-bold rounded-lg 
                           hover:bg-green-600 transition duration-300">
                    Place Order via WhatsApp
                </button>
            </form>
            
            <p id="whatsappError" class="text-red-600 text-center mt-3 hidden text-sm">Please fill in all required fields.</p>
            <p class="text-xs text-gray-500 mt-4 text-center">
                Your order details will be sent to our team via a pre-filled WhatsApp message.
            </p>
        </div>
    </div>


    <!-- === JAVASCRIPT: FUNCTIONALITY & CANVAS ANIMATION === -->
    <script>
        
        // --- 1. UTILITY FUNCTIONS ---
        // Handles image loading failure by showing the styled placeholder text
        function handleImageError(imageElement, placeholderTextId) {
            imageElement.style.display = 'none';
            document.getElementById(placeholderTextId).style.display = 'flex';
        }

        // --- 2. MOBILE MENU & MODAL TOGGLE LOGIC ---
        const mobileMenuButton = document.getElementById('mobile-menu-button');
        const mobileNav = document.getElementById('mobile-nav');
        const modal = document.getElementById('orderModal');
        const closeModalButton = document.getElementById('closeModal');
        
        // Modal opener buttons
        const openModalButtons = document.querySelectorAll('#openModalDesktop, #openModalMobile, #openModalHero, #openModalFooter');
        
        function openModal() {
            modal.classList.remove('hidden');
        }
        
        function closeModal() {
            modal.classList.add('hidden');
        }

        openModalButtons.forEach(button => {
            button.addEventListener('click', openModal);
        });

        closeModalButton.addEventListener('click', closeModal);

        // Close modal when clicking outside
        modal.addEventListener('click', (e) => {
            if (e.target === modal) {
                closeModal();
            }
        });


        if (mobileMenuButton && mobileNav) {
            mobileMenuButton.addEventListener('click', () => {
                mobileNav.classList.toggle('hidden');
            });

            mobileNav.querySelectorAll('a').forEach(link => {
                link.addEventListener('click', () => {
                    mobileNav.classList.add('hidden');
                });
            });
        }
        
        // --- 3. WHATSAPP ORDER FUNCTIONALITY ---
        // Configuration Variables (UPDATED)
        const whatsappNumber = '9779864278144'; // The actual phone number
        const bookPrice = 1500; // Updated price in NPR
        
        const orderForm = document.getElementById('orderForm');
        const whatsappError = document.getElementById('whatsappError');

        orderForm.addEventListener('submit', function(e) {
            e.preventDefault();

            const name = document.getElementById('customerName').value.trim();
            const phone = document.getElementById('customerPhone').value.trim();
            const email = document.getElementById('customerEmail').value.trim();
            const address = document.getElementById('customerAddress').value.trim();
            
            if (!name || !phone || !address) {
                whatsappError.classList.remove('hidden');
                return;
            } else {
                whatsappError.classList.add('hidden');
            }

            // Construct the message
            const message = encodeURIComponent(
                `*NEW ORDER: THE AWARENESS FRAMEWORK*\n` +
                `-------------------------------------------------------\n` +
                `*Name:* ${name}\n` +
                `*Phone:* ${phone}\n` +
                `*Email:* ${email || 'N/A'}\n` +
                `*Address:* ${address}\n` +
                `\n` +
                `*Order:* 1 pcs\n` +
                `*Price:* NPR ${bookPrice.toLocaleString('en-US')}\n`
            );

            // Construct the WhatsApp URL
            const whatsappUrl = `https://wa.me/${whatsappNumber}?text=${message}`;

            // Close modal and redirect
            closeModal();
            window.open(whatsappUrl, '_blank');
        });


        // --- 4. AWARENESS WAVE CANVAS ANIMATION (Perpetual Field) ---
        const canvas = document.getElementById('awarenessCanvas');
        
        if (!canvas) {
            console.error("Canvas element not found.");
        } else {
            const ctx = canvas.getContext('2d');
            
            let rings = [];
            
            const MAX_RINGS = 30; 
            const RING_RGB = '13, 17, 55'; 
            const VISIBILITY_FACTOR = 0.20; 
            const GENERATION_INTERVAL_FRAMES = 100; 
            const RING_SPAWN_RADIUS = 5; 
            const RING_SPEED = 0.2; 

            function resizeCanvas() {
                canvas.width = window.innerWidth;
                canvas.height = window.innerHeight;
            }

            resizeCanvas();
            window.addEventListener('resize', resizeCanvas); 

            function Ring(x, y) {
                this.x = x;
                this.y = y;
                this.radius = RING_SPAWN_RADIUS; 
                this.opacity = 1;
                this.speed = RING_SPEED; 
                this.maxRadius = Math.max(window.innerWidth, window.innerHeight) * 0.4;
            }

            Ring.prototype.update = function() {
                this.radius += this.speed;
                this.opacity = 1 - ((this.radius - RING_SPAWN_RADIUS) / (this.maxRadius - RING_SPAWN_RADIUS));
            };

            Ring.prototype.draw = function() {
                const currentOpacity = this.opacity * VISIBILITY_FACTOR; 
                const shadowOpacity = currentOpacity * 0.4; 

                ctx.shadowColor = 'rgba(' + RING_RGB + ', ' + shadowOpacity + ')';
                ctx.shadowBlur = 12; 
                ctx.shadowOffsetX = 0;
                ctx.shadowOffsetY = 0;

                ctx.beginPath();
                ctx.arc(this.x, this.y, this.radius, 0, Math.PI * 2, false);
                
                ctx.strokeStyle = 'rgba(' + RING_RGB + ', ' + currentOpacity + ')'; 
                ctx.lineWidth = 10; 
                ctx.stroke();

                ctx.shadowBlur = 0; 
                ctx.shadowColor = 'transparent'; 
            };
            
            function initializePerpetualField() {
                const radiusIncrement = RING_SPEED * GENERATION_INTERVAL_FRAMES; 
                const centerX = canvas.width / 2;
                const centerY = canvas.height / 2;

                for (let i = 0; i < MAX_RINGS; i++) {
                    const ring = new Ring(centerX, centerY);
                    ring.radius = (i * radiusIncrement) + RING_SPAWN_RADIUS; 
                    ring.opacity = 1 - ((ring.radius - RING_SPAWN_RADIUS) / (ring.maxRadius - RING_SPAWN_RADIUS));
                    
                    if (ring.opacity > 0) {
                        rings.push(ring);
                    }
                }
            }

            let frameCount = 0;
            function animate() {
                ctx.fillStyle = 'rgba(255, 255, 255, 0.2)'; 
                ctx.fillRect(0, 0, canvas.width, canvas.height); 

                if (frameCount % GENERATION_INTERVAL_FRAMES === 0 && rings.length < MAX_RINGS) { 
                    const centerX = canvas.width / 2;
                    const centerY = canvas.height / 2;
                    rings.push(new Ring(centerX, centerY)); 
                }

                for (let i = 0; i < rings.length; i++) {
                    rings[i].update();
                    rings[i].draw();

                    if (rings[i].radius >= rings[i].maxRadius || rings[i].opacity <= 0) {
                        rings.splice(i, 1);
                        i--;
                    }
                }
                
                frameCount++;
                requestAnimationFrame(animate);
            }
            
            initializePerpetualField();
            animate();
        }
    </script>
</body>
</html>
